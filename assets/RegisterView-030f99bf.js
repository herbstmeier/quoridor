import{B as l}from"./BigInput-19969c32.js";import{d,u as n,_ as m,r as u,o as p,e as h,b as t,g as o,h as f}from"./index-52d4ad67.js";const c=d({name:"RegisterView",components:{BigInput:l},data(){return{username:{value:"",valid:!1},password:{value:"",valid:!1},passwordConfirm:{value:"",valid:!1},confirmError:""}},methods:{registerSubmit(e){const a=new FormData(e.target);a.append("themeId","-1"),this.$axios.post("/user/register",a).then(s=>{n.set(s.data.userData),n.setStorage(s.data.token,s.data.userData.userId),this.$router.push({name:"home"})})},onUsernameChange(e){this.username.value=e},onPwChange(e){this.password.value=e,this.password.value!=this.passwordConfirm.value?this.confirmError="passwords must match":this.confirmError=""},onPwConfirmChange(e){this.passwordConfirm.value=e,this.password.value!=this.passwordConfirm.value?this.confirmError="passwords must match":this.confirmError=""},onUsernameVal(e){this.username.valid=e},onPwVal(e){this.password.valid=e},onPwConfirmVal(e){this.passwordConfirm.valid=e}},computed:{isValid(){return this.username.valid&&this.password.valid&&this.passwordConfirm.valid&&this.password.value==this.passwordConfirm.value}}}),w={class:"auth-form-container"},g=t("span",{class:"font-m"},"Register",-1),v=["disabled"];function C(e,a,s,V,b,E){const r=u("BigInput");return p(),h("div",w,[g,t("form",{class:"auth-form card",novalidate:"",onSubmit:a[0]||(a[0]=f((...i)=>e.registerSubmit&&e.registerSubmit(...i),["prevent"])),ref:"registerForm"},[o(r,{label:"username",val:{required:!0,minlength:3,maxlength:30,type:"text"},onChange:e.onUsernameChange,onValidation:e.onUsernameVal},null,8,["onChange","onValidation"]),o(r,{label:"password",val:{required:!0,minlength:4,maxlength:50,type:"password",pattern:"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[^a-zA-Z\\d]).{4,50}$"},customError:"password must be at least 4 characters long and include at least one digit, lowercase letter, uppercase letter and special character",onChange:e.onPwChange,onValidation:e.onPwVal},null,8,["val","onChange","onValidation"]),o(r,{label:"confirm password",val:{required:!0,type:"password"},customError:e.confirmError,forceCustomError:!0,onChange:e.onPwConfirmChange,onValidation:e.onPwConfirmVal,ref:"pwConfirmBigInput"},null,8,["customError","onChange","onValidation"]),t("button",{class:"auth-submit",type:"submit",disabled:!e.isValid},"sign up",8,v)],544)])}const $=m(c,[["render",C]]);export{$ as default};
